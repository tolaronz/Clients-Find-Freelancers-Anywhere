{% extends "base.html" %}
{% load i18n %}

{% block title %}Choose New Password | ConnectPro{% endblock %}

{% block content %}
<div class="login-shell">
    <div class="brand">
        <div class="brand-icon" aria-hidden="true">
            <svg viewBox="0 0 48 48" role="presentation">
                <rect x="4" y="4" width="40" height="40" rx="12" ry="12" fill="#12ced8"></rect>
                <path d="M28.5 18c0-3-2.5-5.5-5.5-5.5s-5.5 2.5-5.5 5.5 2.5 5.5 5.5 5.5 5.5-2.5 5.5-5.5Zm-5.5 7c-4.5 0-8.5 2.4-8.5 5.3 0 .9.7 1.7 1.7 1.7h13.6c1 0 1.7-.8 1.7-1.7 0-2.9-4-5.3-8.5-5.3Z" fill="#0b2330"></path>
            </svg>
        </div>
        <span class="brand-text">ConnectPro</span>
    </div>

    <div class="card">
        <header class="card-header">
            <h1>{% trans "Set a new password" %}</h1>
            <p>{% trans "Choose a strong password to secure your account." %}</p>
        </header>

        {% if token_fail %}
            <div class="form-errors">
                <div>{% trans "The reset link is invalid or has expired. Please request a new one." %}</div>
            </div>
            <a class="primary-btn secondary" href="{% url 'account_reset_password' %}">{% trans "Request new link" %}</a>
        {% else %}
            <form method="post" class="login-form" novalidate>
                {% csrf_token %}
                {% if form.non_field_errors %}
                    <div class="form-errors">
                        {% for error in form.non_field_errors %}
                            <div>{{ error }}</div>
                        {% endfor %}
                    </div>
                {% endif %}

                <div class="form-group">
                    <label for="{{ form.password1.id_for_label }}">{% trans "New password" %}</label>
                    <div class="input-wrapper">
                        <span class="input-icon" aria-hidden="true">
                            <svg viewBox="0 0 24 24" role="presentation">
                                <path d="M12 2a5 5 0 0 0-5 5v3H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2h-2V7a5 5 0 0 0-5-5zm-3 8V7a3 3 0 1 1 6 0v3H9zm-2 2h10v6H7v-6z"></path>
                            </svg>
                        </span>
                        <input
                            type="password"
                            name="{{ form.password1.html_name }}"
                            id="{{ form.password1.id_for_label }}"
                            placeholder="••••••••"
                            required
                        >
                    </div>
                    {% if form.password1.errors %}
                        <div class="field-error">
                            {% for error in form.password1.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <div class="form-group">
                    <label for="{{ form.password2.id_for_label }}">{% trans "Confirm password" %}</label>
                    <div class="input-wrapper">
                        <span class="input-icon" aria-hidden="true">
                            <svg viewBox="0 0 24 24" role="presentation">
                                <path d="M12 2a5 5 0 0 0-5 5v3H5c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8c0-1.1-.9-2-2-2h-2V7a5 5 0 0 0-5-5zm-3 8V7a3 3 0 1 1 6 0v3H9zm-2 2h10v6H7v-6z"></path>
                            </svg>
                        </span>
                        <input
                            type="password"
                            name="{{ form.password2.html_name }}"
                            id="{{ form.password2.id_for_label }}"
                            placeholder="••••••••"
                            required
                        >
                    </div>
                    {% if form.password2.errors %}
                        <div class="field-error">
                            {% for error in form.password2.errors %}
                                {{ error }}
                            {% endfor %}
                        </div>
                    {% endif %}
                </div>

                <button type="submit" class="primary-btn">{% trans "Save new password" %}</button>
            </form>
        {% endif %}
    </div>
</div>
{% endblock %}
